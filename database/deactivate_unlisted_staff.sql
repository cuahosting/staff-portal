-- ============================================
-- SQL Script: Deactivate Unlisted Staff
-- Description: Sets IsActive = 0 for all staff in hr_staff
--              who are NOT in the provided active staff list
-- Date: 2025-12-05
-- ============================================

-- First, let's see how many staff will be affected (preview query)
-- Run this SELECT first to verify before running the UPDATE

SELECT
    StaffID,
    CONCAT(FirstName, ' ', IFNULL(MiddleName, ''), ' ', Surname) AS FullName,
    EmailAddress,
    IsActive
FROM hr_staff
WHERE StaffID NOT IN (
    'A0001', 'A0002', 'A0003', 'A0004', 'A0005', 'A0006', 'A0007', 'A0008', 'A0009', 'A0010',
    'A0011', 'A0012', 'A0013', 'A0014', 'A0015', 'A0056', 'E0060', 'E0103', 'A0019', 'A0020',
    'A0021', 'A0022', 'A0023', 'A0024', 'A0025', 'A0026', 'A0027', 'A0028', 'A0029', 'A0030',
    'A0031', 'E0105', 'E0149', 'E0028', 'E0026', 'E0095', 'E0087', 'E0094', 'E0116', 'E0036',
    'E0049', 'E0115', 'E0118', 'E0119', 'E0122', 'A0032', 'A0033', 'A0034', 'A0035', 'A0036',
    'A0037', 'A0038', 'A0039', 'A0040', 'E0033', 'E0068', 'E0035', 'E0069', 'A0016', 'A0017',
    'A0044', 'E0043', 'A0042', 'E0100', 'E0098', 'E0123', 'E0099', 'E0136', 'E0139', 'E0145',
    'E0006', 'E0007', 'E0071', 'E0023', 'E0011', 'E0018', 'E0012', 'E0054', 'E0111', 'E0101',
    'E0125', 'E0114', 'E0151', 'E0126', 'E0097', 'E0144', 'E0032', 'E0024', 'E0110', 'E0076',
    'E0108', 'E0082', 'E0104', 'A0043', 'E0150', 'E0079', 'E0137', 'E0143', 'E0014', 'E0015',
    'E0109', 'E0025', 'E0016', 'E0051', 'E0056', 'E0063', 'E0055', 'E0081', 'E0092', 'E0075',
    'E0112', 'E0128', 'E0130', 'A0045', 'E0141', 'E0124', 'E0021', 'E0046', 'E0065', 'E0140',
    'E0077', 'E0113', 'E0129', 'E0133', 'E0106', 'E0142', 'E0017', 'E0121', 'E0020', 'E0062',
    'E0064', 'E0086', 'E0080', 'E0090', 'E0047', 'E0120', 'E0083', 'E0134', 'E0131', 'E0135',
    'E0148', 'A0047', 'E0037', 'E0070', 'E0039', 'E0132', 'E0078', 'E0091', 'E0117', 'E0093',
    'E0042', 'E0084', 'E0048', 'E0088', 'E0089', 'E0127', 'E0057', 'E0146', 'E0038', 'E0073',
    'E0138', 'E0102', 'E0074', 'A0049', 'E0107', 'A0050', 'A0051', 'A0052', 'A0053', 'A0054',
    'E0152'
)
AND IsActive = 1;

-- ============================================
-- ACTUAL UPDATE - Uncomment and run after verifying the SELECT above
-- ============================================

UPDATE hr_staff
SET IsActive = 0
WHERE StaffID NOT IN (
    'A0001', 'A0002', 'A0003', 'A0004', 'A0005', 'A0006', 'A0007', 'A0008', 'A0009', 'A0010',
    'A0011', 'A0012', 'A0013', 'A0014', 'A0015', 'A0056', 'E0060', 'E0103', 'A0019', 'A0020',
    'A0021', 'A0022', 'A0023', 'A0024', 'A0025', 'A0026', 'A0027', 'A0028', 'A0029', 'A0030',
    'A0031', 'E0105', 'E0149', 'E0028', 'E0026', 'E0095', 'E0087', 'E0094', 'E0116', 'E0036',
    'E0049', 'E0115', 'E0118', 'E0119', 'E0122', 'A0032', 'A0033', 'A0034', 'A0035', 'A0036',
    'A0037', 'A0038', 'A0039', 'A0040', 'E0033', 'E0068', 'E0035', 'E0069', 'A0016', 'A0017',
    'A0044', 'E0043', 'A0042', 'E0100', 'E0098', 'E0123', 'E0099', 'E0136', 'E0139', 'E0145',
    'E0006', 'E0007', 'E0071', 'E0023', 'E0011', 'E0018', 'E0012', 'E0054', 'E0111', 'E0101',
    'E0125', 'E0114', 'E0151', 'E0126', 'E0097', 'E0144', 'E0032', 'E0024', 'E0110', 'E0076',
    'E0108', 'E0082', 'E0104', 'A0043', 'E0150', 'E0079', 'E0137', 'E0143', 'E0014', 'E0015',
    'E0109', 'E0025', 'E0016', 'E0051', 'E0056', 'E0063', 'E0055', 'E0081', 'E0092', 'E0075',
    'E0112', 'E0128', 'E0130', 'A0045', 'E0141', 'E0124', 'E0021', 'E0046', 'E0065', 'E0140',
    'E0077', 'E0113', 'E0129', 'E0133', 'E0106', 'E0142', 'E0017', 'E0121', 'E0020', 'E0062',
    'E0064', 'E0086', 'E0080', 'E0090', 'E0047', 'E0120', 'E0083', 'E0134', 'E0131', 'E0135',
    'E0148', 'A0047', 'E0037', 'E0070', 'E0039', 'E0132', 'E0078', 'E0091', 'E0117', 'E0093',
    'E0042', 'E0084', 'E0048', 'E0088', 'E0089', 'E0127', 'E0057', 'E0146', 'E0038', 'E0073',
    'E0138', 'E0102', 'E0074', 'A0049', 'E0107', 'A0050', 'A0051', 'A0052', 'A0053', 'A0054',
    'E0152'
);

-- Verify the update
SELECT
    COUNT(*) AS TotalStaff,
    SUM(CASE WHEN IsActive = 1 THEN 1 ELSE 0 END) AS ActiveStaff,
    SUM(CASE WHEN IsActive = 0 THEN 1 ELSE 0 END) AS InactiveStaff
FROM hr_staff;
